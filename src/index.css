@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-parchment font-crimson text-stone-800;
  }
}

/* Range slider styling */
input[type="range"]::-webkit-slider-thumb {
  @apply appearance-none w-5 h-5 bg-stone-600 rounded-full cursor-pointer;
  -webkit-appearance: none;
}

input[type="range"]::-moz-range-thumb {
  @apply w-5 h-5 bg-stone-600 rounded-full cursor-pointer border-0;
}

/* Subtle parchment texture via CSS */
.bg-gradient-to-b.from-parchment.to-parchment-dark {
  background-image:
    url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E"),
    linear-gradient(to bottom, #FAF3E0, #F5E6C8);
}

/* Number input: hide spinner arrows */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
input[type="number"] {
  -moz-appearance: textfield;
}

/* Step reveal animation with opacity starting at 0 */
.animate-stepReveal {
  opacity: 0;
}

/* ── Volume Control: Dark Temple Layout ──────── */

/* Dark jungle page background */
.vol-bg {
  background:
    url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.08'/%3E%3C/svg%3E"),
    linear-gradient(168deg, #0D1B0E 0%, #1A2E1C 30%, #122214 60%, #0D1B0E 100%);
  min-height: 100vh;
}

/* Main container — dark carved stone panel */
.vol-sprite {
  position: relative;
  width: 100%;
  max-width: 420px;
  margin: 0 auto;
  aspect-ratio: 768 / 1376;
  background:
    url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.06'/%3E%3C/svg%3E"),
    linear-gradient(180deg, #2C1F10 0%, #38281A 15%, #2C1F10 50%, #241A0E 85%, #1A1208 100%);
  border: 3px solid #4A3620;
  border-radius: 1rem;
  box-shadow:
    0 0 60px rgba(0, 0, 0, 0.6),
    inset 0 2px 0 rgba(255, 255, 255, 0.05),
    inset 0 -2px 0 rgba(0, 0, 0, 0.3);
  overflow: hidden;
}

/* Absolute region positioning base */
.vol-region {
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Recessed stone zone panel */
.vol-zone-frame {
  background:
    url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E"),
    linear-gradient(145deg, #1E1508 0%, #2C1F10 100%);
  border: 2px solid #4A3620;
  border-radius: 0.75rem;
  box-shadow:
    inset 3px 3px 8px rgba(0, 0, 0, 0.5),
    inset -1px -1px 3px rgba(255, 255, 255, 0.04),
    0 2px 6px rgba(0, 0, 0, 0.3);
}

/* Raised stone panel (readouts, scroll) */
.vol-stone-panel {
  background:
    url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E"),
    linear-gradient(180deg, #3D2B18 0%, #2C1F10 100%);
  border: 2px solid #4A3620;
  border-radius: 0.5rem;
  box-shadow:
    inset 1px 1px 2px rgba(255, 255, 255, 0.06),
    inset -1px -1px 2px rgba(0, 0, 0, 0.2),
    0 3px 8px rgba(0, 0, 0, 0.25);
}

/* Jade glow for active play button */
.vol-jade-glow {
  box-shadow: 0 0 12px rgba(59, 139, 94, 0.5), 0 0 24px rgba(59, 139, 94, 0.25);
  animation: jadeGlow 2s ease-in-out infinite;
}

/* Dark-theme button */
.vol-ctrl-btn {
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 0.5rem;
  transition: all 0.15s ease;
  cursor: pointer;
}
.vol-ctrl-btn:hover {
  background: rgba(255, 255, 255, 0.14);
  border-color: rgba(255, 255, 255, 0.2);
}
.vol-ctrl-btn:active {
  background: rgba(255, 255, 255, 0.04);
}

/* Horizontal glyph divider */
.vol-glyph-divider {
  height: 2px;
  background: linear-gradient(90deg, transparent, #4A3620 20%, #6B5030 50%, #4A3620 80%, transparent);
}
.vol-glyph-divider::after {
  content: '◆';
  display: block;
  text-align: center;
  margin-top: -9px;
  font-size: 10px;
  color: #6B5030;
}

/* Meter track well */
.vol-meter-track {
  background: #1A1208;
  border: 2px solid #3D2B18;
  border-radius: 9999px;
  box-shadow: inset 2px 2px 6px rgba(0, 0, 0, 0.6);
}

/* Draggable meter thumb */
.vol-meter-thumb {
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: radial-gradient(circle at 35% 35%, #E8D5B0, #A08060);
  border: 2px solid #6B5030;
  box-shadow: 0 2px 6px rgba(0,0,0,0.4), inset 0 1px 2px rgba(255,255,255,0.3);
  cursor: grab;
  z-index: 10;
  transition: left 0.3s ease-out;
}
.vol-meter-thumb:active,
.vol-meter-thumb.vol-thumb-dragging {
  cursor: grabbing;
  transform: translate(-50%, -50%) scale(1.15);
  box-shadow: 0 0 12px rgba(59, 139, 94, 0.5), 0 2px 8px rgba(0,0,0,0.5);
  transition: left 0s, transform 0.1s;
}

/* ── Volume Control: Base Utilities ─────────── */
.vol-shake {
  animation: shake 0.5s ease-in-out;
}
.vol-drop-active {
  border-color: #2D6A4F !important;
  border-style: solid !important;
  border-width: 3px !important;
  box-shadow: 0 0 16px rgba(45, 106, 79, 0.4), inset 0 0 12px rgba(45, 106, 79, 0.1);
  background-color: rgba(45, 106, 79, 0.08) !important;
}
.vol-drop-reject {
  border-color: #f87171 !important;
  border-style: solid !important;
  border-width: 3px !important;
  box-shadow: 0 0 16px rgba(248, 113, 113, 0.4), inset 0 0 12px rgba(248, 113, 113, 0.1);
  background-color: rgba(248, 113, 113, 0.06) !important;
}
.vol-dragging {
  opacity: 0.5;
}
.vol-piece-selected {
  background-color: rgba(59, 139, 94, 0.25);
  box-shadow: 0 0 0 2px #5CAD7E, 0 0 20px rgba(59, 139, 94, 0.5);
  border-radius: 0.5rem;
  transform: scale(1.08);
}
.vol-zone-empty {
  animation: zonePulse 2s ease-in-out infinite;
}
.vol-zone-target {
  animation: zoneTargetPulse 1.2s ease-in-out infinite;
}
/* Touch drag clone — large, visible, centered under finger */
.vol-touch-clone {
  position: fixed;
  pointer-events: none;
  z-index: 50;
  opacity: 0.9;
  transform: scale(1.3);
  filter: drop-shadow(0 4px 12px rgba(0,0,0,0.25));
  border-radius: 0.75rem;
  background: rgba(255,255,255,0.9);
  padding: 4px 8px;
}

/* "Drop here" shimmer shown on zones during active touch drag */
.vol-zone-drag-hint {
  border-color: rgba(45, 106, 79, 0.5) !important;
  border-style: solid !important;
}
.vol-zone-drag-hint::after {
  content: '\2193  Drop here';
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  color: rgba(45, 106, 79, 0.5);
  pointer-events: none;
}

.vol-confetti {
  position: absolute;
  bottom: 50%;
  pointer-events: none;
  animation: confetti 1s ease-out forwards;
}

/* Print styles */
@media print {
  /* Hide navigation, footer, buttons */
  button, footer, [data-action], input, select, textarea,
  #number-input-container, .flex.justify-center.gap-3.mb-6 {
    display: none !important;
  }

  /* Show showcase cards and tabs header */
  #showcase-view, .showcase-card, #tabs-container {
    display: block !important;
  }
  #tabs-container button { display: none !important; }
  #tabs-container { margin-bottom: 1rem; }

  /* Avoid page breaks inside cards */
  .print-avoid-break {
    break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Clean backgrounds for printing */
  body, .bg-gradient-to-b, .bg-parchment, .bg-parchment-dark {
    background: white !important;
    background-image: none !important;
  }
  .showcase-card {
    border: 1px solid #ccc !important;
    margin-bottom: 0.75rem;
    padding: 0.75rem;
  }

  /* Show verify badges in print */
  .showcase-card span[class*="rounded-full"] {
    display: inline-flex !important;
  }
}
